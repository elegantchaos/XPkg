env:
  global:
  - SWIFT_BRANCH=swift-4.2-branch
  - SWIFT_VERSION=swift-4.2-DEVELOPMENT-SNAPSHOT-2018-05-30-a
matrix:
  include:
  - os: linux
    language: generic
    dist: trusty
    sudo: required
    install:
    - sudo apt-get install clang libicu-dev
    - mkdir swift
    - curl https://swift.org/builds/$SWIFT_BRANCH/ubuntu1404/$SWIFT_VERSION/$SWIFT_VERSION-ubuntu14.04.tar.gz
      -s | tar xz -C swift &> /dev/null
    - export PATH="$(pwd)/swift/$SWIFT_VERSION-ubuntu14.04/usr/bin:$PATH"
    - swift package update
    script:
    - swift build builder
    - .build/debug/builder build
    - .build/debug/xpkg --version
    - .build/debug/builder test
  - os: osx
    osx_image: xcode9.3
    language: swift
    sudo: required
    install:
    - wget https://swift.org/builds/$SWIFT_BRANCH/xcode/$SWIFT_VERSION/$SWIFT_VERSION-osx.pkg
    - sudo installer -pkg $SWIFT_VERSION-osx.pkg -target /
    - export PATH="/Library/Developer/Toolchains/$SWIFT_VERSION.xctoolchain/usr/bin:$PATH"
    - swift package update
    script:
    - swift build builder
    - .build/debug/builder build
    - .build/debug/xpkg --version
    - .build/debug/builder test
notifications:
  email: false
  slack:
    rooms:
      secure: FP/IsOlG+jUjHqhd/aBJDPiwYsIkMN5TtbKBr85ax914P6eEzwOUv6KyoOP2Ux9L7GM2vkxesux13YasKG2tX5eSumZGFLciY8x26Jh7g1SjVBJ43WHOp2lA19R9srM5nXYJy1zYRmYgeLezv6pN65FLp4hhQIpy5lyScwFocgIWe+BEf36HpOBUvmmDjf5Cl9L6Pjl7bvfYw+VkoUjSQemIrnTgDKfxm+qR+J79agob/Ig/6d+OHJlXh9crckb9M7pCCW9e3qanzayvhXUA6vU9qsIRtZ0iHmkzAkOkAagnn6M70uYrdccjr7ku1JFasE1mvSdji5qkaZPdnPKt0qVVxM33j5dL5QivCFA6lztD+om9l1+hUPFjOwsWMw9HucG55+sowXvaj+4gDSQIb2vE29RHRDU7LZUualPEPzMfJsvq0FgADpGXxjpr0mFPVVGORbnwN3FyajerQ9sJrjrzLqhYDrp8NrG9EoOailUgfmCu8/h2r8AxqfuSY5EBUMAQ40QI2cV+YnsqjmJXhFOoQzJ9bmdVvYD2y/MHgMwRRNEvoya8JeP6jF+dX5g4AEOp0ecjL52fodKTDk9pp4b1ggo8y9Mki6Hl/TSeblFvha55ebsAudkrv36miQVDXxqm1ILy69OW6NjYT1U9YZCJLnSADUwDSHfVJCf18og=
