xg() {
    builtin pushd "`xpkg path $@`"
}

_comp_xg() {
    cur="${COMP_WORDS[COMP_CWORD]}"
    COMPREPLY=( $(compgen -W "$(xpkg list --compact)" -- "$cur") )
}

complete -o nospace -o bashdefault -F _comp_xg xg
